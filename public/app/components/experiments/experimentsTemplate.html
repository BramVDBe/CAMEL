<div class="row mt-5 mb-3">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
	Fields
      </div>
      <div class="card-body">
	<div id="field-selector">
	  <div data-ng-repeat="field in experiments.fields">
	    <div class="filter-control">
	      <i class="material-icons pointer" data-ng-click="experiments.addFilterItem(field)">{{'add_circle_outline'}}</i>
	      <input id="field_{{field.id}}" type="checkbox" name="{{field.id}}" data-ng-model="field.show">
	      <label for="field_{{field.id}}">
		{{field.title}}
	      </label>
	    </div>
	  </div>
	</div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
	Filter
	<i class="material-icons pointer" data-ng-click="experiments.toggleHelp()">{{'help'}}</i>
      </div>
      <div class="card-body" data-ng-show="experiments.showHelp">
	<p>Different filters will be applied in an <code>AND</code> fashion (eg. "this species, with this many lines, published in this year")</p>
	<p>Multiple filters for the same field will be used as <code>OR</code> (eg. "this species or this species, or...")</p>
      </div>
      <div class="card-body">
	<div id="filter-blocks">
	  <div class="filter-item">
	    <label for="expname-filter"><strong>Name:</strong> </label>
	    <input id="expname-filter" data-ng-model="experiments.filter.ExperimentName" data-ng-change="experiments.query()">
	  </div>	  
	  <div class="filter-item" data-ng-repeat="field in experiments.filterBlocks track by $index">
	    <div data-ng-switch="field.type_column">
	      <label for="filter-{{$index}}">{{field.title}}: </label>
	      <span data-ng-switch-when="value_VARCHAR">
		<input id="filter-{{$index}}" data-ng-model="experiments.filter[field.id]" data-ng-change="experiments.query()">
	      </span>
	      <span data-ng-switch-when="value_TEXT">
		<input id="filter-{{$index}}" data-ng-model="experiments.filter[field.id]" data-ng-change="experiments.query()">
	      </span>
	      <span data-ng-switch-when="value_BOOL">
		<input id="filter-{{$index}}" type="checkbox" data-ng-model="experiments.filter[field.id]" data-ng-change="experiments.query()">
	      </span>
	      <div data-ng-switch-when="value_INT">
		Min: <input id="filter-{{$index}}" data-ng-model="experiments.filter[field.id]['min']" data-ng-change="experiments.query()">
		Max: <input id="filter-{{$index}}" data-ng-model="experiments.filter[field.id]['max']" data-ng-change="experiments.query()">
	      </div>
	      <i class="material-icons pointer" data-ng-click="experiments.removeFilterItem($index)">{{'delete_forever'}}</i>
	    </div>
	  </div>
	</div>
      </div>
    </div>
  </div>
</div>



<div class="row">
  <div class="col-12">
    <div>
      Showing <code>{{experiments.exp_count}}</code> experiments 
      <span data-ng-hide="experiments.loaded">(Refreshing data...)</span>
    </div>
    <experiments-table experiments="experiments.experiments" fields="experiments.fields" data-ng-show="experiments.init_loaded"></experiments-table>
  </div>
</div>
